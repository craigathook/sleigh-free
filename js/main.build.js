!function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return s(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,i,n){"use strict";function s(){function e(){S.elem.onclick=i}function i(){r.to(D,60,{speed:12},a.config(.31,.7,.31,.94)),r.to(S,1,{y:-l.height},a.config(.31,.7,.31,.94)),c.ontick=n}function n(){m+=D.speed,P.elem.innerHTML=Math.round(x),D.y=m-x;var e=m-x+f,i=y*(1-Math.abs(e)/g);i<0&&(i=0),r.to(j,.1,{x:-(i/2)+Math.random()*i,y:-(i/2)+Math.random()*i});var n=20*(L-k.x);n>90&&(n=90),n<-90&&(n=-90),L=k.x,k.dead||r.to(k,.3,{x:c.mouse.x,rotation:10*(L-k.x)}),k.dead?r.to(k,.1,{rotation:-120}):r.to(k,.1,{rotation:n});var s;s=v>5?.3*w:w;var o=Math.abs(k.rotation)/50,a=Math.sin(o*Math.PI/180);v+=s,v-=8*a,k.dead||(x+=v),v<2&&(v=2),v>16&&(v=16),p>16.1&&(p=16),r.to(G,.5,{y:150-20*v});var u=x-I,b=100+100*Math.random();if(u>b){I=x;var M=T.unused.pop();T.used.push(M),M.x=Math.random()*l.width,M.y=l.height+20*v,H.add(M)}e>400&&(k.dead&&(k.remove(),h()),k.dead=!0),T.used.forEach(function(t,e){k.dead||(t.y-=v),t.y<-200&&(T.used.splice(e,1),T.unused.push(t),H.remove(t)),d(t,k)&&(k.dead=!0)}),C.used.forEach(function(e,i){e.alpha<0&&(T.used.splice(i,1),T.unused.push(e),D.remove(e)),d(t,k)&&(k.dead=!0)})}function h(){if(!M){console.log('???")');var t=c.createGameObject("dead-screen");t.elem.querySelector(".end-score").innerHTML=P.elem.innerHTML,t.y=-1e3,t.elem.onclick=u,l.add(t),t.elem.style.visibility="hidden",r.to(t,3,{y:0},a.config(1,.01,.65,1)),M=!0}}function u(){c.ontick=null,document.querySelector("#stageContainer").innerHTML="",new s}function d(t,e){if(t.x>e.x-e.inner.width/2&&t.x<e.x+e.inner.width/2&&t.y>e.y-e.inner.height/2&&t.y<e.y+e.inner.height/2)return!0}var c=new o,l=c.setStage(stageContainer);c.setAssetContainer(assetContainer);var p=1,f=480,m=-700,y=50,g=2e3,v=0,w=.1,x=0,b=50,M=!1,T={used:[],unused:[]},O=50,C={used:[],unused:[]},j=c.createGameObject("container"),G=c.createGameObject("container"),k=c.createGameObject("container"),E=c.createGameObject("sleigh"),D=c.createGameObject("avalanche"),H=c.createGameObject("container"),P=c.createGameObject("score"),S=c.createGameObject("welcome-screen"),N=Math.max(document.documentElement.clientWidth,window.innerWidth||0),X=Math.max(document.documentElement.clientHeight,window.innerHeight||0);for(N>400&&(N=400),X>720&&(X=720),l.elem.style.height=X+"px",l.elem.style.width=N+"px",l.height=X,l.width=N,D.y=0,D.speed=2,k.add(E),k.inner=E,k.inner.x-=k.inner.width/2,k.inner.y-=k.inner.height/2,window.sleighInner=E,l.add(j),j.add(G),G.add(k),G.add(H),G.add(D),l.add(P),l.add(S),P.elem.innerHTML="0",k.y=l.height/2;b--;){var q=c.createGameObject("tree");G.add(q),q.x-=1e3,T.unused.push(q)}for(;O--;){var A=c.createGameObject("tree");D.add(A),A.x-=1e3,C.unused.push(A)}var L=k.x,I=x,q=T.unused.pop();T.used.push(q),q.x=Math.random()*l.width,q.y=l.height-100,H.add(q),e(),this.replay=u,window.game=c}var r=e("./Tweener"),o=e("./GameEngine"),a=e("./CubicBezier");e("./utils/Geometry");window.Tweener=r,window.cubeEase=a,window.SleighFree=s},{"./CubicBezier":2,"./GameEngine":3,"./Tweener":4,"./utils/Geometry":5}],2:[function(t,e,i){var n=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=n,this.cx=3*this.p1x,this.cy=3*this.p1y,this.bx=3*(this.p2x-this.p1x)-this.cx,this.by=3*(this.p2y-this.p1y)-this.cy,this.ax=1-this.cx-this.bx,this.ay=1-this.cy-this.by,this.ease=this.ease.bind(this)}return t.create=function(e,i,n,s,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=1);var o=new t(i,n,s,r);return"string"==typeof e&&(t.easings[e]=o),o.ease},t.config=function(e,i,n,s){return void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=1),new t(e,i,n,s).ease},t.get=function(e){return t.easings[e].ease},t.prototype.getEpsilon=function(t){return void 0===t&&(t=400),1/(200*t)},t.prototype.ease=function(t,e,i,n){return this.solve(t,this.getEpsilon(n))},t.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))},t.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},t.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},t.prototype.sampleDerivX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},t.prototype.solveCurveX=function(t,e){for(var i,n,s,r,o,a=0,s=t;a<8;a++){if(r=this.sampleCurveX(s)-t,Math.abs(r)<e)return s;if(o=this.sampleDerivX(s),Math.abs(o)<e)break;s-=r/o}if(i=0,n=1,s=t,s<i)return i;if(s>n)return n;for(;i<n;){if(r=this.sampleCurveX(s),Math.abs(r-t)<e)return s;t>r?i=s:n=s,s=.5*(n-i)+i}return s},t.easings={},t}();e.exports=n},{}],3:[function(t,e,i){function n(){this.gameObjects=[],this.assetContainer=null,this.gameContainer=null,this.assets={},this.mouse={x:0,y:0},this.update=function(){for(var t in this.gameObjects){var e=this.gameObjects[t];e.update()}this.render(),setTimeout(this.update,1e3/60)}.bind(this),this.stage=null,this.ontick=null,this.render=function(){for(var t in this.gameObjects){var e=this.gameObjects[t],i=e.elem;i.style.visibility="visible",i.style.position="absolute",i.style.left=e.x+"px",i.style.top=e.y+"px",i.style.opacity=e.alpha,i.style.webkitTransform="rotate("+e.rotation+"deg)",i.style.MozTransform="rotate("+e.rotation+"deg)",i.style.msTransform="rotate("+e.rotation+"deg)",i.style.OTransform="rotate("+e.rotation+"deg)",i.style.transform="rotate("+e.rotation+"deg)"}this.ontick&&this.ontick()}.bind(this),this.createGameObject=function(t,e){var i=this.assetContainer.querySelector("."+t),n=i.cloneNode(!0);i.style.visibility="hidden",i.style.display="block",i.style.position="absolute",i.style.top="0px",i.style.left="0px";var r=new s(n,this.gameObjects.length,e);return r.width=i.offsetWidth,r.height=i.offsetHeight,this.gameObjects.push(r),r}.bind(this),this.setAssetContainer=function(t){this.assetContainer=t,t.style.display="block",t.style.position="absolute",t.style.top="-10000px"}.bind(this),this.setStage=function(t,e,i){var n=new s(t,"GameContainer");return t.style.overflow="hidden",this.gameContainer=n,this.stage=n,n}.bind(this),this.updateMouse=function(e){var i=t(e).x-this.stage.elem.offsetLeft,n=t(e).y-this.stage.elem.offsetTop;i<0&&(i=0),i>this.stage.width&&(i=this.stage.width),n<0&&(n=0),n>this.stage.height&&(n=this.stage.height),this.mouse.x=i,this.mouse.y=n}.bind(this);var t=function(t){var e={x:0,y:0};if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var i=t.touches[0]||t.changedTouches[0];e.x=i.pageX,e.y=i.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e.x=t.pageX,e.y=t.pageY);return e};setTimeout(this.update,1e3/60),document.onmousemove=this.updateMouse,document.ontouchmove=this.updateMouse}function s(t,e,i){this.x=0,this.y=0,this.width=t.offsetWidth,this.height=t.offsetHeight,this.rotation=0,this.elem=t,this.id=e,this.name=i,this.parent=null,this.children=[],this.update=function(){}.bind(this),this.add=function(t){this.children.push(t),t.parent&&t.parent.remove(t),t.parent=this,this.elem.appendChild(t.elem)}.bind(this),this.remove=function(t){t=t||this,t.parent&&t.elem.parentNode&&t.elem.parentNode.removeChild(t.elem);for(var e in this.children)this.children[e].id==t.id&&this.children.splice(e,1)}.bind(this)}var r=(!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,"undefined"!=typeof InstallTrigger,Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(t){return"[object SafariRemoteNotification]"===t.toString()}(!window.safari||safari.pushNotification),!!document.documentMode);!r&&!!window.StyleMedia,!!window.chrome&&!!window.chrome.webstore;e.exports=n},{}],4:[function(t,e,i){function n(){function t(t,e,i,n){function s(t,e){var i={};for(var n in e)i[n]=t[n];return i}this.target=t,this.duration=1e3*e,this.startTime=(new Date).getTime(),this.endTime=this.startTime+this.duration,this.currentTime=0,this.progress=0,this.endProps=i,this.ease=n,this.startProps=s(t,i),this.killed=!1,this.update=function(){this.currentTime=(new Date).getTime()-this.startTime,this.progress=this.currentTime/this.duration,this.progress>1&&(this.progress=1);for(var t in this.endProps){if("elem"==t)return;var e=this.endProps[t]-this.startProps[t];this.target[t]=this.startProps[t]+e*this.ease(this.progress)}this.progress<1&&0==this.killed&&setTimeout(this.update,1e3/60)}.bind(this),setTimeout(this.update,1e3/60)}this.tweens=[],this.to=function(e,i,n,s){s||(s=function(t){return t});var r;for(var o in this.tweens)if(this.tweens[o].target==e)return void(this.tweens[o]=new t(e,i,n,s));r=new t(e,i,n,s),this.tweens.push(r)}.bind(this),this.killAllTweens=function(){for(var t in this.tweens)this.tweens[t].update=function(){}}.bind(this),this.render=function(){for(var t in this.tweens){console.log("1");var e=this.tweens[t];e.update()}}.bind(this)}e.exports=new n},{}],5:[function(t,e,i){function n(){this.angleDiff=function(t,e){return t=this.toRadians(t),e=this.toRadians(e),this.toDegrees(Math.atan2(Math.sin(e-t),Math.cos(e-t)))}.bind(this),this.getAngle=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)},this.getGlobalAngle=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)},this.distanceBetween=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},this.moveAtAngle=function(t,e,i){return t.x=t.x+i*Math.cos(e),t.y=t.y+i*Math.sin(e),t},this.toDegrees=function(t){return Math.round(180*t/Math.PI)},this.toRadians=function(t){return t*Math.PI/180},this.angleDifference=function(t,e){var i=Number(t),n=Number(e);return Math.abs((i+180-n)%360-180)}}e.exports=new n},{}]},{},[1]);
//# sourceMappingURL=main.build.js.map
